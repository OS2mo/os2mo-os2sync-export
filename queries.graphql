# SPDX-FileCopyrightText: Magenta ApS <https://magenta.dk>
# SPDX-License-Identifier: MPL-2.0

query ReadUser($uuids: UUID!) {
  itusers(filter: { uuids: [$uuids] }) {
    objects {
      current {
        user_key
        external_id
        person {
          cpr_number
          name
          nickname
        }
        engagement {
          org_unit {
            uuid
            org_unit_hierarchy_model {
              user_key
            }
            ancestors {
              uuid
            }
            org_unit_level {
              uuid
            }
            unit_type {
              uuid
            }
          }
          job_function {
            name
          }
        }
        email: addresses {
          address_type(filter: { scope: "EMAIL" }) {
            scope
            uuid
          }
          visibility {
            user_key
          }
          value
        }
        phone: addresses {
          address_type(filter: { scope: "PHONE" }) {
            uuid
            scope
          }
          visibility {
            user_key
          }
          value
        }
      }
    }
  }
}

query ReadUserITAccounts($uuids: UUID!) {
  employees(filter: { uuids: [$uuids] }) {
    objects {
      current {
        fk_org_users: itusers(filter: { itsystem: { user_keys: "FK-org" } }) {
          user_key
          external_id
        }
        AD_users: itusers(filter: { itsystem: { user_keys: "AD" } }) {
          uuid
          user_key
          external_id
        }
      }
    }
  }
}
