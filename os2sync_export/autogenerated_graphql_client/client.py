# Generated by ariadne-codegen on 2024-09-11 12:06
# Source: queries.graphql

from uuid import UUID

from .async_base_client import AsyncBaseClient
from .read_user import ReadUser
from .read_user import ReadUserItusers
from .read_user_i_t_accounts import ReadUserITAccounts
from .read_user_i_t_accounts import ReadUserITAccountsEmployees


def gql(q: str) -> str:
    return q


class GraphQLClient(AsyncBaseClient):
    async def read_user(self, uuids: UUID) -> ReadUserItusers:
        query = gql(
            """
            query ReadUser($uuids: UUID!) {
              itusers(filter: {uuids: [$uuids]}) {
                objects {
                  current {
                    user_key
                    external_id
                    person {
                      cpr_number
                      name
                      nickname
                    }
                    engagement {
                      org_unit {
                        uuid
                        org_unit_hierarchy_model {
                          user_key
                        }
                        ancestors {
                          uuid
                        }
                        org_unit_level {
                          uuid
                        }
                        unit_type {
                          uuid
                        }
                      }
                      job_function {
                        name
                      }
                    }
                    email: addresses {
                      address_type(filter: {scope: "EMAIL"}) {
                        scope
                        uuid
                      }
                      visibility {
                        user_key
                      }
                      value
                    }
                    phone: addresses {
                      address_type(filter: {scope: "PHONE"}) {
                        uuid
                        scope
                      }
                      visibility {
                        user_key
                      }
                      value
                    }
                  }
                }
              }
            }
            """
        )
        variables: dict[str, object] = {"uuids": uuids}
        response = await self.execute(query=query, variables=variables)
        data = self.get_data(response)
        return ReadUser.parse_obj(data).itusers

    async def read_user_i_t_accounts(self, uuids: UUID) -> ReadUserITAccountsEmployees:
        query = gql(
            """
            query ReadUserITAccounts($uuids: UUID!) {
              employees(filter: {uuids: [$uuids]}) {
                objects {
                  current {
                    fk_org_users: itusers(filter: {itsystem: {user_keys: "FK-org"}}) {
                      user_key
                      external_id
                    }
                    AD_users: itusers(filter: {itsystem: {user_keys: "AD"}}) {
                      uuid
                      user_key
                      external_id
                    }
                  }
                }
              }
            }
            """
        )
        variables: dict[str, object] = {"uuids": uuids}
        response = await self.execute(query=query, variables=variables)
        data = self.get_data(response)
        return ReadUserITAccounts.parse_obj(data).employees
